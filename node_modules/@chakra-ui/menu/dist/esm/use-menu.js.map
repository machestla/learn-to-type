{"version":3,"sources":["../../src/use-menu.ts"],"names":["useClickable","useDescendant","useDescendants","useControllableState","useDisclosure","useFocusOnHide","useId","useIds","useOutsideClick","useShortcut","useUpdateEffect","usePopper","addItem","callAllHandlers","createContext","dataAttr","focus","getNextIndex","getNextItemFromSearch","getPrevIndex","getValidChildren","isArray","isString","mergeRefs","mergeWith","normalizeEventKey","removeItem","cloneElement","useCallback","useRef","useState","MenuProvider","useMenuContext","strict","name","useMenu","props","id","closeOnSelect","closeOnBlur","autoSelect","isLazy","placement","fixed","isOpen","onOpen","onClose","onToggle","menuRef","buttonRef","ref","handler","event","current","contains","target","popper","focusedIndex","setFocusedIndex","domContext","focusRef","visible","shouldFocus","buttonId","menuId","openAndFocusMenu","openAndFocusFirstItem","openAndFocusLastItem","descendants","length","refocus","hasFocusWithin","document","activeElement","shouldRefocus","el","element","preventScroll","onTransitionEnd","forceUpdate","orientation","useMenuButton","externalRef","menu","onClick","action","onKeyDown","eventKey","keyMap","Enter","ArrowDown","ArrowUp","preventDefault","stopPropagation","buttonProps","getReferenceProps","useMenuList","Error","onCharacterPress","key","Tab","Escape","nextIndex","prevIndex","characterHandler","character","nextItem","node","textContent","index","indexOf","menulistProps","children","tabIndex","role","style","transformOrigin","useMenuPositioner","getPopperProps","visibility","useMenuItem","onMouseEnter","onMouseEnterProp","onMouseMove","onMouseMoveProp","onMouseLeave","onMouseLeaveProp","onClickProp","isDisabled","isFocusable","htmlProps","context","disabled","focusable","isFocused","trulyDisabled","tabbable","useMenuOption","type","isChecked","rest","hookProps","optionsProps","useMenuOptionGroup","value","valueProp","defaultValue","onChange","onChangeProp","isRadio","fallback","setValue","selectedValue","nextValue","includes","validChildren","clones","map","child","useMenuState"],"mappings":"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","sourcesContent":["import { useClickable } from \"@chakra-ui/clickable\"\nimport { useDescendant, useDescendants } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useDisclosure,\n  UseDisclosureProps,\n  useFocusOnHide,\n  useId,\n  useIds,\n  useOutsideClick,\n  useShortcut,\n  useUpdateEffect,\n} from \"@chakra-ui/hooks\"\nimport { usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport {\n  addItem,\n  callAllHandlers,\n  createContext,\n  dataAttr,\n  EventKeyMap,\n  focus,\n  getNextIndex,\n  getNextItemFromSearch,\n  getPrevIndex,\n  getValidChildren,\n  isArray,\n  isString,\n  mergeRefs,\n  mergeWith,\n  normalizeEventKey,\n  removeItem,\n} from \"@chakra-ui/utils\"\nimport React, {\n  cloneElement,\n  HTMLAttributes,\n  MouseEvent,\n  useCallback,\n  useRef,\n  useState,\n} from \"react\"\n\nconst [MenuProvider, useMenuContext] = createContext<UseMenuReturn>({\n  strict: false,\n  name: \"MenuContext\",\n})\n\nexport { MenuProvider, useMenuContext }\n\nexport interface UseMenuProps extends UsePopperProps {\n  /**\n   * Unique id to be used by menu and it's children\n   */\n  id?: string\n  /**\n   * If `true`, the menu will close when a menu item is\n   * clicked\n   *\n   * @default true\n   */\n  closeOnSelect?: boolean\n  /**\n   * If `true`, the menu will close when you click outside\n   * the menu list\n   *\n   * @default true\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the first enabled menu item will be selected\n   * when the menu opens.\n   *\n   * @default true\n   */\n  autoSelect?: boolean\n  /**\n   * Performance ðŸš€:\n   * If `true`, the MenuItem rendering will be deferred\n   * until the menu is open.\n   */\n  isLazy?: boolean\n  /**\n   * If `true`, the top-level menu will be opened in controlled mode\n   */\n  isOpen?: UseDisclosureProps[\"isOpen\"]\n  /**\n   * If `true`, the top-level menu will be opened in un-controlled mode\n   */\n  defaultIsOpen?: UseDisclosureProps[\"defaultIsOpen\"]\n  /**\n   * Function to be called when menu is open\n   */\n  onOpen?: UseDisclosureProps[\"onOpen\"]\n  /**\n   * Function to be called when menu is closed\n   */\n  onClose?: UseDisclosureProps[\"onClose\"]\n  /**\n   * The placement of the `MenuList`\n   *\n   * @default \"bottom-start\"\n   */\n  placement?: UsePopperProps[\"placement\"]\n  /**\n   * The strategy for positioning the `MenuList`\n   *\n   * @default true\n   */\n  fixed?: UsePopperProps[\"fixed\"]\n}\n\n/**\n * React Hook to manage a menu\n *\n * It provides the logic and will be used with react context\n * to propagate it's return value to all children\n */\nexport function useMenu(props: UseMenuProps) {\n  const {\n    id,\n    closeOnSelect = true,\n    closeOnBlur = true,\n    autoSelect = true,\n    isLazy,\n    placement = \"bottom-start\",\n    fixed = true,\n  } = props\n\n  const { isOpen, onOpen, onClose, onToggle } = useDisclosure(props)\n\n  /**\n   * Prepare the reference to the menu and disclosure\n   */\n  const menuRef = useRef<HTMLDivElement>(null)\n  const buttonRef = useRef<HTMLButtonElement>(null)\n\n  useOutsideClick({\n    ref: menuRef,\n    handler: (event) => {\n      if (\n        isOpen &&\n        closeOnBlur &&\n        !buttonRef.current?.contains(event.target as HTMLElement)\n      ) {\n        onClose()\n      }\n    },\n  })\n\n  /**\n   * Add some popper.js for dynamic positioning\n   */\n  const popper = usePopper({ placement, fixed, ...props })\n\n  const [focusedIndex, setFocusedIndex] = useState(-1)\n\n  /**\n   * Context to register all menu item nodes\n   */\n  const domContext = useDescendants<HTMLDivElement, {}>()\n\n  /**\n   * Focus the button when we close the menu\n   */\n  useUpdateEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1)\n    }\n  }, [isOpen])\n\n  useFocusOnHide(menuRef, {\n    focusRef: buttonRef,\n    visible: isOpen,\n    shouldFocus: true,\n  })\n\n  /**\n   * Generate unique ids for menu's list and button\n   */\n  const [buttonId, menuId] = useIds(id, `menu-button`, `menu-list`)\n\n  const openAndFocusMenu = useCallback(() => {\n    onOpen()\n    if (menuRef.current) focus(menuRef.current)\n  }, [onOpen, menuRef])\n\n  const openAndFocusFirstItem = useCallback(() => {\n    onOpen()\n    setFocusedIndex(0)\n  }, [onOpen, setFocusedIndex])\n\n  const openAndFocusLastItem = useCallback(() => {\n    onOpen()\n    setFocusedIndex(domContext.descendants.length - 1)\n  }, [onOpen, setFocusedIndex, domContext.descendants])\n\n  const refocus = () => {\n    const hasFocusWithin = menuRef.current?.contains(document.activeElement)\n    const shouldRefocus = isOpen && !hasFocusWithin\n\n    if (!shouldRefocus) return\n\n    const el = domContext.descendants[focusedIndex]?.element\n    el?.focus({ preventScroll: true })\n  }\n\n  return {\n    openAndFocusMenu,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    onTransitionEnd: refocus,\n    domContext,\n    popper,\n    buttonId,\n    menuId,\n    forceUpdate: popper.forceUpdate,\n    orientation: \"vertical\",\n    isOpen,\n    onToggle,\n    onOpen,\n    onClose,\n    menuRef,\n    buttonRef,\n    focusedIndex,\n    closeOnSelect,\n    closeOnBlur,\n    autoSelect,\n    setFocusedIndex,\n    isLazy,\n  }\n}\n\nexport interface UseMenuReturn extends ReturnType<typeof useMenu> {}\n\n/**\n * React Hook to manage a menu button.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and it's return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuButtonProps\n  extends Omit<HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuButton(\n  props: UseMenuButtonProps,\n  externalRef: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  const {\n    isOpen,\n    onClose,\n    autoSelect,\n    popper,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    openAndFocusMenu,\n  } = menu\n\n  const onClick = useCallback(() => {\n    if (isOpen) {\n      onClose()\n    } else {\n      const action = autoSelect ? openAndFocusFirstItem : openAndFocusMenu\n      action()\n    }\n  }, [autoSelect, isOpen, onClose, openAndFocusFirstItem, openAndFocusMenu])\n\n  const onKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n      const keyMap: EventKeyMap = {\n        Enter: openAndFocusFirstItem,\n        ArrowDown: openAndFocusFirstItem,\n        ArrowUp: openAndFocusLastItem,\n      }\n\n      const action = keyMap[eventKey]\n\n      if (action) {\n        event.preventDefault()\n        event.stopPropagation()\n        action(event)\n      }\n    },\n    [openAndFocusFirstItem, openAndFocusLastItem],\n  )\n\n  const buttonProps = {\n    ...props,\n    id: menu.buttonId,\n    \"data-active\": dataAttr(menu.isOpen),\n    \"aria-expanded\": menu.isOpen,\n    \"aria-haspopup\": \"menu\" as React.AriaAttributes[\"aria-haspopup\"],\n    \"aria-controls\": menu.menuId,\n    onClick: callAllHandlers(props.onClick, onClick),\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n\n  return popper.getReferenceProps(\n    buttonProps,\n    mergeRefs(menu.buttonRef, externalRef),\n  )\n}\n\n/**\n * React Hook to manage a menu list.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and it's return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuListProps\n  extends Omit<HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuList(\n  props: UseMenuListProps,\n  ref: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  if (!menu) {\n    throw new Error(\n      `useMenuContext: context is undefined. Seems you forgot the component within <Menu>`,\n    )\n  }\n\n  const {\n    focusedIndex,\n    setFocusedIndex,\n    menuRef,\n    isOpen,\n    onClose,\n    menuId,\n    popper,\n    domContext: { descendants },\n    isLazy,\n  } = menu\n\n  /**\n   * Hook that creates a keydown event handler that listens\n   * to printable keyboard character press\n   */\n  const onCharacterPress = useShortcut({\n    preventDefault: (event) => event.key !== \" \",\n  })\n\n  const onKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n\n      const keyMap: EventKeyMap = {\n        Tab: (event) => {\n          event.preventDefault()\n        },\n        Escape: onClose,\n        ArrowDown: () => {\n          const nextIndex = getNextIndex(focusedIndex, descendants.length)\n          setFocusedIndex(nextIndex)\n        },\n        ArrowUp: () => {\n          const prevIndex = getPrevIndex(focusedIndex, descendants.length)\n          setFocusedIndex(prevIndex)\n        },\n      }\n\n      const handler = keyMap[eventKey]\n\n      if (handler) {\n        event.preventDefault()\n        handler(event)\n        return\n      }\n\n      const characterHandler = onCharacterPress((character) => {\n        /**\n         * Typeahead: Based on current character pressed,\n         * find the next item to be selected\n         */\n        const nextItem = getNextItemFromSearch(\n          descendants,\n          character,\n          (node) => node.element?.textContent || \"\",\n          descendants[focusedIndex],\n        )\n\n        if (nextItem) {\n          const index = descendants.indexOf(nextItem)\n          setFocusedIndex(index)\n        }\n      })\n\n      characterHandler(event)\n    },\n    [descendants, focusedIndex, onCharacterPress, onClose, setFocusedIndex],\n  )\n\n  const menulistProps: any = {\n    ...props,\n    ref: mergeRefs(menuRef, ref),\n    children: !isLazy || isOpen ? props.children : null,\n    tabIndex: -1,\n    role: \"menu\",\n    id: menuId,\n    style: {\n      ...props.style,\n      transformOrigin: popper.transformOrigin,\n    },\n    \"aria-orientation\": \"vertical\" as React.AriaAttributes[\"aria-orientation\"],\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n\n  return menulistProps\n}\n\nexport function useMenuPositioner(props: any = {}) {\n  const { popper, isOpen } = useMenuContext()\n  return mergeWith(popper.getPopperProps(props), {\n    style: { visibility: isOpen ? \"visible\" : \"hidden\" },\n  })\n}\n\nexport interface UseMenuItemProps\n  extends Omit<HTMLAttributes<Element>, \"color\"> {\n  isDisabled?: boolean\n  isFocusable?: boolean\n}\n\nexport function useMenuItem(\n  props: UseMenuItemProps,\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onMouseEnter: onMouseEnterProp,\n    onMouseMove: onMouseMoveProp,\n    onMouseLeave: onMouseLeaveProp,\n    onClick: onClickProp,\n    isDisabled,\n    isFocusable,\n    ...htmlProps\n  } = props\n\n  const menu = useMenuContext()\n\n  const {\n    domContext,\n    setFocusedIndex,\n    focusedIndex,\n    closeOnSelect,\n    onClose,\n    menuRef,\n    isOpen,\n  } = menu\n\n  const ref = useRef<HTMLDivElement>(null)\n  const id = `menuitem-${useId()}`\n\n  /**\n   * Register the menuitem's node into the domContext\n   */\n  const index = useDescendant({\n    element: ref.current,\n    context: domContext,\n    disabled: isDisabled,\n    focusable: isFocusable,\n  })\n\n  const onMouseEnter = useCallback(\n    (event) => {\n      onMouseEnterProp?.(event)\n      if (isDisabled) return\n\n      setFocusedIndex(index)\n    },\n    [setFocusedIndex, index, isDisabled],\n  )\n\n  const onMouseMove = useCallback(\n    (event) => {\n      onMouseMoveProp?.(event)\n      if (document.activeElement !== ref.current) {\n        onMouseEnter(event)\n      }\n    },\n    [onMouseEnter],\n  )\n\n  const onMouseLeave = useCallback(\n    (event) => {\n      onMouseLeaveProp?.(event)\n      if (isDisabled) return\n\n      setFocusedIndex(-1)\n    },\n    [setFocusedIndex, isDisabled],\n  )\n\n  const onClick = useCallback(\n    (event: MouseEvent) => {\n      onClickProp?.(event)\n      /**\n       * Close menu and parent menu's if `closeOnSelect` is set to `true`\n       */\n      if (closeOnSelect) {\n        onClose()\n      }\n    },\n    [onClose, onClickProp, closeOnSelect],\n  )\n\n  const isFocused = index === focusedIndex\n\n  const trulyDisabled = isDisabled && !isFocusable\n\n  useUpdateEffect(() => {\n    if (!isOpen) return\n    if (isFocused && !trulyDisabled && ref.current) {\n      focus(ref.current)\n    } else if (document.activeElement !== menuRef.current) {\n      menuRef.current?.focus()\n    }\n  }, [isFocused, trulyDisabled, menuRef, isOpen])\n\n  const tabbable = useClickable({\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    ref: mergeRefs(ref, externalRef),\n    isDisabled,\n    isFocusable,\n  })\n\n  return {\n    ...htmlProps,\n    ...tabbable,\n    id,\n    role: \"menuitem\",\n    tabIndex: isFocused ? 0 : -1,\n  }\n}\n\nexport interface UseMenuOptionOptions {\n  value?: string\n  isChecked?: boolean\n  type?: \"radio\" | \"checkbox\"\n  children?: React.ReactNode\n}\n\nexport interface UseMenuOptionProps\n  extends UseMenuItemProps,\n    UseMenuOptionOptions {}\n\nexport function useMenuOption(\n  props: UseMenuOptionProps,\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onClick,\n    isDisabled,\n    isFocusable,\n    type = \"radio\",\n    isChecked,\n    ...rest\n  } = props\n\n  const hookProps = { isDisabled, isFocusable, onClick }\n  const optionsProps = useMenuItem(hookProps, externalRef)\n\n  return {\n    ...rest,\n    ...optionsProps,\n    role: `menuitem${type}`,\n    \"aria-checked\": isChecked as React.AriaAttributes[\"aria-checked\"],\n  }\n}\n\nexport interface UseMenuOptionGroupProps {\n  value?: string | string[]\n  defaultValue?: string | string[]\n  type?: \"radio\" | \"checkbox\"\n  onChange?: (value: string | string[]) => void\n  children?: React.ReactNode\n}\n\nexport function useMenuOptionGroup(props: UseMenuOptionGroupProps) {\n  const {\n    children,\n    type = \"radio\",\n    value: valueProp,\n    defaultValue,\n    onChange: onChangeProp,\n    ...htmlProps\n  } = props\n\n  const isRadio = type === \"radio\"\n\n  const fallback = isRadio ? \"\" : []\n\n  const [value, setValue] = useControllableState({\n    defaultValue: defaultValue ?? fallback,\n    value: valueProp,\n    onChange: onChangeProp,\n  })\n\n  const onChange = useCallback(\n    (selectedValue: string) => {\n      if (type === \"radio\" && isString(value)) {\n        setValue(selectedValue)\n      }\n\n      if (type === \"checkbox\" && isArray(value)) {\n        const nextValue = value.includes(selectedValue)\n          ? removeItem(value, selectedValue)\n          : addItem(value, selectedValue)\n\n        setValue(nextValue)\n      }\n    },\n    [value, setValue, type],\n  )\n\n  const validChildren = getValidChildren(children)\n\n  const clones = validChildren.map((child) => {\n    /**\n     * We've added an internal `id` to each `MenuItemOption`,\n     * let's use that for type-checking.\n     *\n     * We can't rely on displayName or the element's type since\n     * they can be changed by the user.\n     */\n    if ((child.type as any).id !== \"MenuItemOption\") return child\n\n    const onClick = (event: MouseEvent) => {\n      onChange(child.props.value)\n      child.props.onClick?.(event)\n    }\n\n    const isChecked =\n      type === \"radio\"\n        ? child.props.value === value\n        : value.includes(child.props.value)\n\n    return cloneElement(child, {\n      type,\n      onClick,\n      isChecked,\n    })\n  })\n\n  return {\n    ...htmlProps,\n    children: clones,\n  }\n}\n\nexport function useMenuState() {\n  const { isOpen, onClose } = useMenuContext()\n  return { isOpen, onClose }\n}\n"],"file":"use-menu.js"}